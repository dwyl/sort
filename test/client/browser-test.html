<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>TEST Riot.js Messages Component/Tag</title>
    <!-- Load the QUnit CSS file from CDN - Require to display our tests attractively -->
    <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-1.18.0.css">
    <link rel="stylesheet" href="/style.css">
    <script type="text/javascript" src='https://code.jquery.com/jquery-1.11.3.min.js'></script>
    <link rel="shortcut icon" type="image/png" href="http://www.favicon.cc/logo3d/805435.png"/>
  </head>
  <body style='margin: 0 1em;'>
    <ul id="messages">
      <message></message>
    </ul>

    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <!-- Load the QUnit Testing Framework from CDN - this is the important bit ... -->
    <script src="https://code.jquery.com/jquery-1.11.3.js"></script>
    <script src="https://cdn.rawgit.com/ScottHamper/Cookies/1.2.1/dist/cookies.min.js">
    </script>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script src="https://cdn.jsdelivr.net/g/riot@2.2.3(riot.min.js+compiler.min.js)" charset="utf-8"></script>
    <script type="riot/tag" src="message.tag"></script>
    <script src="https://code.jquery.com/qunit/qunit-1.18.0.js"></script>
    <script src="/client.js"></script>
    <script>
      // var messageStore = [ // fake messages
      //   {n:'Emma', m:'Message 1', t:1439390404062},
      //   {n:'Mina', m:'Message 2', t:1439390405062},
      //   {n:'Rafe', m:'Message 3', t:1439390406062},
      //   {n:'Jack', m:'Message 4', t:1439390407062},
      //   {n:'Dave', m:'Message 5', t:1439390409062},
      // ];
      // riot.mount('message', {
      //   messageStore: messageStore,
      //   scrollToBottom: function(){}
      // });
      $( document ).ready(function() {

      setTimeout(function(){
        var obj = {"m":"Hello Mina!", "t":1439390410062, "n":"Dave"}
        renderMessage(JSON.stringify(obj))
        // console.log('Hello Emma!')
        // This is what a simple unit test looks like:
        test('Test adding new message to DOM', function(assert) {
          // var count = $('#messages li').length;
          var result = $('#messages li:last-child').first().text();
            // var result = document.getElementById('messages').textContent;
            // console.log(result)
            assert.equal(result.indexOf('Hello Mina') > -1, true); // just so we know everything loaded ok

        });
      },1000);
    });
    </script>

  </body>
</html>
